<aside id="sidebar"
    class="sidebar w-72 min-h-screen bg-white border-r border-slate-200 p-6 flex flex-col fixed left-0 z-40">
    <div class="flex items-center justify-between mb-12">
        <div class="flex items-center gap-3">
            <div
                class="w-10 h-10 bg-emerald-600 rounded-xl flex items-center justify-center shadow-lg shadow-emerald-500/50">
                <i class="fas fa-file-invoice text-white text-xl"></i>
            </div>
            <h1 class="text-2xl font-bold tracking-tight text-slate-800">Billora<span
                    class="text-emerald-500">Pro</span></h1>
        </div>
        <button onclick="toggleSidebar()" class="lg:hidden text-slate-400 hover:text-slate-600">
            <i class="fas fa-times"></i>
        </button>
    </div>

    <nav class="space-y-4 flex-1">
        <% if (user.permissions.dashboard) { %>
            <a href="/dashboard"
                class="flex items-center gap-3 p-3 <%= active === 'dashboard' ? 'sidebar-active' : 'text-slate-500 hover:bg-emerald-50 hover:text-emerald-600' %> rounded-xl transition-all">
                <i class="fas fa-th-large"></i> แผงควบคุม
            </a>
            <% } %>
                <% if (user.permissions.bills) { %>
                    <a href="/bills"
                        class="flex items-center gap-3 p-3 <%= active === 'bills' ? 'sidebar-active' : 'text-slate-500 hover:bg-emerald-50 hover:text-emerald-600' %> rounded-xl transition-all">
                        <i class="fas fa-file-invoice-dollar"></i> ใบเสร็จและใบสำคัญ
                    </a>
                    <% } %>
                        <% if (user.permissions.slips) { %>
                            <a href="/slips"
                                class="flex items-center gap-3 p-3 <%= active === 'slips' ? 'sidebar-active' : 'text-slate-500 hover:bg-emerald-50 hover:text-emerald-600' %> rounded-xl transition-all">
                                <i class="fas fa-exchange-alt"></i> สลิปการโอนเงิน
                            </a>
                            <% } %>

                                <% if (user.role==='admin' ) { %>
                                    <a href="/history"
                                        class="flex items-center gap-3 p-3 <%= active === 'history' ? 'sidebar-active' : 'text-slate-500 hover:bg-emerald-50 hover:text-emerald-600' %> rounded-xl transition-all">
                                        <i class="fas fa-history"></i> ประวัติการสแกน
                                    </a>
                                    <% } %>

                                        <% if (user.role==='admin' ) { %>
                                            <!-- Online Channels Link -->
                                            <a href="/channels"
                                                class="flex items-center gap-3 p-3 <%= active === 'channels' ? 'sidebar-active' : 'text-slate-500 hover:bg-emerald-50 hover:text-emerald-600' %> rounded-xl transition-all">
                                                <i class="fas fa-shopping-cart"></i> ช่องทางออนไลน์
                                            </a>
                                            <% } %>

                                                <% if (user.role==='admin' ) { %>
                                                    <a href="/users"
                                                        class="flex items-center gap-3 p-3 <%= active === 'users' ? 'sidebar-active' : 'text-slate-500 hover:bg-emerald-50 hover:text-emerald-600' %> rounded-xl transition-all">
                                                        <i class="fas fa-users-cog"></i> จัดการผู้ใช้
                                                    </a>
                                                    <% } %>
    </nav>

    <div class="mt-auto pt-6 border-t border-slate-100 space-y-3">
        <div class="flex items-center gap-3 p-3 bg-slate-50 rounded-2xl">
            <div
                class="w-10 h-10 rounded-full bg-gradient-to-tr from-emerald-500 to-teal-400 flex items-center justify-center text-white font-bold">
                <%= user.username.charAt(0).toUpperCase() %>
            </div>
            <div class="overflow-hidden">
                <p class="text-sm font-semibold text-slate-800 truncate">
                    <%= user.username %>
                </p>
                <p class="text-xs text-slate-500 capitalize">
                    <%= user.role==='admin' ? 'ผู้ดูแลระบบ' : 'ผู้ใช้งานทั่วไป' %>
                </p>
            </div>
        </div>
        <a href="javascript:void(0)" onclick="confirmLogout()"
            class="flex items-center gap-3 p-3 text-red-500 hover:bg-red-50 rounded-xl transition-all font-medium">
            <i class="fas fa-sign-out-alt"></i> ออกจากระบบ
        </a>
    </div>
</aside>