<div class="px-6 py-6 max-w-[1600px] mx-auto">

    <div class="mb-6 flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4">
        <div>
            <h1 class="text-2xl font-bold text-slate-800 flex items-center gap-3">
                <span class="w-10 h-10 rounded-xl bg-indigo-100 text-indigo-600 flex items-center justify-center">
                    <i class="fas fa-clipboard-list"></i>
                </span>
                แผนการสั่งซื้อ (Purchase Plan)
            </h1>
            <p class="text-slate-500 mt-1 ml-14">รายการสินค้าที่ต้องสั่งซื้อเพิ่ม (ต่ำกว่า Min Stock)</p>
        </div>
        <div>
            <!-- Optional Actions like Export -->
            <button onclick="window.print()"
                class="bg-indigo-50 text-indigo-600 px-4 py-2 rounded-lg font-bold hover:bg-indigo-100 transition-colors">
                <i class="fas fa-print mr-2"></i> พิมพ์รายงาน
            </button>
        </div>
    </div>

    <div class="bg-white rounded-[32px] shadow-lg border border-slate-100 overflow-hidden">
        <div class="overflow-x-auto">
            <table class="w-full text-left">
                <thead
                    class="bg-slate-50 border-b border-slate-200 text-xs font-bold text-slate-500 uppercase tracking-wider">
                    <tr>
                        <th class="px-6 py-4">รหัส / ชื่อสินค้า</th>
                        <th class="px-6 py-4 text-center">หน่วยนับ</th>
                        <th class="px-6 py-4 text-right">คงเหลือ (Current)</th>
                        <th class="px-6 py-4 text-right">จุดสั่งซื้อ (Min)</th>
                        <th class="px-6 py-4 text-right">เป้าหมาย (Max)</th>
                        <th class="px-6 py-4 text-center bg-indigo-50 text-indigo-700">จำนวนที่ต้องสั่ง (Order Qty)</th>
                        <th class="px-6 py-4 text-right">ต้นทุน/หน่วย</th>
                        <th class="px-6 py-4 text-right">ยอดรวม (Est. Cost)</th>
                    </tr>
                </thead>
                <tbody class="divide-y divide-slate-100">
                    <% if (plans.length===0) { %>
                        <tr>
                            <td colspan="8" class="px-6 py-12 text-center text-slate-400">
                                <i class="fas fa-check-circle text-4xl mb-3 text-emerald-400 block"></i>
                                สต็อกเพียงพอทุกรายการ (No Items to Reorder)
                            </td>
                        </tr>
                        <% } else { %>
                            <% plans.forEach(item=> { %>
                                <tr class="hover:bg-slate-50 transition-colors">
                                    <td class="px-6 py-4">
                                        <div class="font-bold text-slate-800">
                                            <%= item.name %>
                                        </div>
                                        <div class="text-xs text-slate-500 font-mono">
                                            <%= item.code %>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 text-center text-sm text-slate-500">
                                        -
                                    </td>
                                    <td class="px-6 py-4 text-right font-mono font-bold text-red-500">
                                        <%= parseFloat(item.current_stock).toLocaleString() %>
                                    </td>
                                    <td class="px-6 py-4 text-right font-mono text-slate-600">
                                        <%= parseFloat(item.min_stock).toLocaleString() %>
                                    </td>
                                    <td class="px-6 py-4 text-right font-mono text-slate-600">
                                        <%= parseFloat(item.max_stock).toLocaleString() %>
                                    </td>
                                    <td class="px-6 py-4 text-center font-bold text-lg text-indigo-700 bg-indigo-50/30">
                                        <%= parseFloat(item.order_quantity).toLocaleString() %>
                                            <div class="text-[10px] font-normal text-indigo-400">Multiple: <%=
                                                    item.multiple_qty %>
                                            </div>
                                    </td>
                                    <td class="px-6 py-4 text-right font-mono text-slate-600">
                                        <%= parseFloat(item.cost).toLocaleString('th-TH', {minimumFractionDigits: 2}) %>
                                    </td>
                                    <td class="px-6 py-4 text-right font-mono font-bold text-slate-800">
                                        <%= parseFloat(item.estimated_cost).toLocaleString('th-TH',
                                            {minimumFractionDigits: 2}) %>
                                    </td>
                                </tr>
                                <% }) %>
                                    <% } %>
                </tbody>
            </table>
        </div>
    </div>
</div>